import{r as i,W as k,j as e,a as q}from"./app-4906a150.js";import{C as y}from"./Checkbox-47f738b9.js";import{P as h}from"./PrimaryButton-b1799f9b.js";import A from"./CountDown-5cf47fb5.js";const P=({exam:l,student:m})=>{var x;const[u,p]=i.useState(!1),[j,w]=i.useState(!1),[c,N]=i.useState(0),[t,b]=i.useState(null),[d,C]=i.useState([]),[s,o]=i.useState(null),{post:S,setData:g}=k({results:d});i.useEffect(()=>{l.questions&&b(l.questions[c])},[c]),i.useEffect(()=>{t&&o({question_id:t.id,answers:[]})},[t]),i.useEffect(()=>{s!=null&&s.answers&&w(s.answers.length===0)},[s]),i.useEffect(()=>{g("results",d)},[d]);const v=n=>{var a;if(!(!n||!t||!s))if(t.isMultiple){if((a=s.answers)!=null&&a.includes(n)){const r=s.answers.filter(Q=>Q!==n);o({...s,answers:r})}else if(s!=null&&s.answers){const r=[...s.answers,n];o({...s,answers:r})}}else o({...s,answers:[n]})},E=()=>{l.questions&&(c<l.questions.length-1?(N(c+1),s&&C([...d,s])):p(!0))},f=()=>{S(route("student.exam.submit",{exam:l.id,student:m.id}))};return e.jsxs("div",{children:[e.jsx(q,{title:l.title}),e.jsxs("div",{className:"p-10",children:[e.jsxs("div",{className:"w-full h-auto text-center mt-10",children:[e.jsx("p",{className:"text-bold underline",children:l.title}),e.jsx("p",{children:l.description})]}),e.jsx(A,{total_time:l.total_time,handleExamSubmit:f}),t&&e.jsxs("div",{className:"flex w-full h-2/3 flex-row mt-20 justify-between gap-5",children:[e.jsxs("div",{className:"bg-slate-300 p-10 w-3/4",children:[e.jsxs("p",{className:"text-2xl",children:["Q. ",t.title]}),e.jsx("p",{className:"",children:t.description})]}),e.jsxs("div",{className:"bg-slate-300 p-10 w-2/4",children:[e.jsxs("p",{className:"underline underline-offset-4",children:["Choose Right Answers"," ",t.isMultiple?"(Multiple Choice)":"(Single Choice)"]}),t.isMultiple&&e.jsx("p",{children:"Select all that apply."}),(x=t.answers)==null?void 0:x.map(n=>{var a;if(n.id)return e.jsx("div",{className:"block mt-4",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx(y,{name:"remember",checked:(a=s==null?void 0:s.answers)==null?void 0:a.includes(n.id),onChange:r=>{v(n.id)}}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:n.option})]})})})]})]}),!u&&e.jsx("div",{className:"flex flex-row-reverse mt-20",children:e.jsx(h,{disabled:j,onClick:()=>E(),children:"Next"})}),u&&e.jsx("div",{className:"flex justify-center",children:e.jsx(h,{onClick:()=>f(),children:"Submit"})})]})]})};export{P as default};
